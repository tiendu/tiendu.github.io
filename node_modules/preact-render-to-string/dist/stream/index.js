var e=require("preact"),t="__s",r="__c",n="__d",o="__s",i=/[\s\n\\/='"\0<>]/,a=/^(xlink|xmlns|xml)([A-Z])/,s=/^(?:accessK|auto[A-Z]|cell|ch|col|cont|cross|dateT|encT|form[A-Z]|frame|hrefL|inputM|maxL|minL|noV|playsI|popoverT|readO|rowS|src[A-Z]|tabI|useM|item[A-Z])/,c=/^ac|^ali|arabic|basel|cap|clipPath$|clipRule$|color|dominant|enable|fill|flood|font|glyph[^R]|horiz|image|letter|lighting|marker[^WUH]|overline|panose|pointe|paint|rendering|shape|stop|strikethrough|stroke|text[^L]|transform|underline|unicode|units|^v[^i]|^w|^xH/,l=new Set(["draggable","spellcheck"]);function u(e){void 0!==e.__g?e.__g|=8:e[n]=!0}function p(e){void 0!==e.__g?e.__g&=-9:e[n]=!1}function f(e){return void 0!==e.__g?!!(8&e.__g):!0===e[n]}var d=/["&<]/;function h(e){if(0===e.length||!1===d.test(e))return e;for(var t=0,r=0,n="",o="";r<e.length;r++){switch(e.charCodeAt(r)){case 34:o="&quot;";break;case 38:o="&amp;";break;case 60:o="&lt;";break;default:continue}r!==t&&(n+=e.slice(t,r)),n+=o,t=r+1}return r!==t&&(n+=e.slice(t,r)),n}var v={},m=new Set(["animation-iteration-count","border-image-outset","border-image-slice","border-image-width","box-flex","box-flex-group","box-ordinal-group","column-count","fill-opacity","flex","flex-grow","flex-negative","flex-order","flex-positive","flex-shrink","flood-opacity","font-weight","grid-column","grid-row","line-clamp","line-height","opacity","order","orphans","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","widows","z-index","zoom"]),g=/[A-Z]/g;function _(e){var t="";for(var r in e){var n=e[r];if(null!=n&&""!==n){var o="-"==r[0]?r:v[r]||(v[r]=r.replace(g,"-$&").toLowerCase()),i=";";"number"!=typeof n||o.startsWith("--")||m.has(o)||(i="px;"),t=t+o+":"+n+i}}return t||void 0}function y(){this.__d=!0}function b(e,t){return{__v:e,context:t,props:e.props,setState:y,forceUpdate:y,__d:!0,__h:new Array(0)}}var x,k,w,C,S=function(){var e=this;this.promise=new Promise(function(t,r){e.resolve=t,e.reject=r})},A={},E=[],L=Array.isArray,P=Object.assign,j="",F="\x3c!--$s--\x3e",T="\x3c!--/$s--\x3e";function W(r,n,o){var i=e.options[t];e.options[t]=!0,x=e.options.__b,k=e.options.diffed,w=e.options.__r,C=e.options.unmount;var a=e.h(e.Fragment,null);a.__k=[r];try{var s=N(r,n||A,!1,void 0,a,!1,o);return L(s)?s.join(j):s}catch(e){if(e.then)throw new Error('Use "renderToStringAsync" for suspenseful rendering.');throw e}finally{e.options.__c&&e.options.__c(r,E),e.options[t]=i,E.length=0}}function D(e,t){var n,i=e.type,a=!0;return e[r]?(a=!1,(n=e[r]).state=n[o]):n=new i(e.props,t),e[r]=n,n.__v=e,n.props=e.props,n.context=t,u(n),null==n.state&&(n.state=A),null==n[o]&&(n[o]=n.state),i.getDerivedStateFromProps?n.state=P({},n.state,i.getDerivedStateFromProps(n.props,n.state)):a&&n.componentWillMount?(n.componentWillMount(),n.state=n[o]!==n.state?n[o]:n.state):!a&&n.componentWillUpdate&&n.componentWillUpdate(),w&&w(e),n.render(n.props,n.state,t)}function N(t,n,d,v,m,g,y){if(null==t||!0===t||!1===t||t===j)return j;var S=typeof t;if("object"!=S)return"function"==S?j:"string"==S?h(t):t+j;if(L(t)){var E,W=j;m.__k=t;for(var U=t.length,Z=0;Z<U;Z++){var q=t[Z];if(null!=q&&"boolean"!=typeof q){var H,R=N(q,n,d,v,m,g,y);"string"==typeof R?W+=R:(E||(E=new Array(U)),W&&E.push(W),W=j,L(R)?(H=E).push.apply(H,R):E.push(R))}}return E?(W&&E.push(W),E):W}if(void 0!==t.constructor)return j;t.__=m,x&&x(t);var z=t.type,I=t.props;if("function"==typeof z){var B,O,V,K=n;if(z===e.Fragment){if("tpl"in I){for(var G=j,J=0;J<I.tpl.length;J++)if(G+=I.tpl[J],I.exprs&&J<I.exprs.length){var Q=I.exprs[J];if(null==Q)continue;"object"!=typeof Q||void 0!==Q.constructor&&!L(Q)?G+=Q:G+=N(Q,n,d,v,t,g,y)}return G}if("UNSTABLE_comment"in I)return"\x3c!--"+h(I.UNSTABLE_comment)+"--\x3e";O=I.children}else{if(null!=(B=z.contextType)){var X=n[B.__c];K=X?X.props.value:B.__}var Y=z.prototype&&"function"==typeof z.prototype.render;if(Y)O=/**#__NOINLINE__**/D(t,K),V=t[r];else{t[r]=V=/**#__NOINLINE__**/b(t,K);for(var ee=0;f(V)&&ee++<25;){p(V),w&&w(t);try{O=z.call(V,I,K)}catch(e){throw g&&(t._suspended=!0),e}}u(V)}if(null!=V.getChildContext&&(n=P({},n,V.getChildContext())),Y&&e.options.errorBoundaries&&(z.getDerivedStateFromError||V.componentDidCatch)){O=null!=O&&O.type===e.Fragment&&null==O.key&&null==O.props.tpl?O.props.children:O;try{return N(O,n,d,v,t,g,!1)}catch(i){return z.getDerivedStateFromError&&(V[o]=z.getDerivedStateFromError(i)),V.componentDidCatch&&V.componentDidCatch(i,A),f(V)?(O=D(t,n),null!=(V=t[r]).getChildContext&&(n=P({},n,V.getChildContext())),N(O=null!=O&&O.type===e.Fragment&&null==O.key&&null==O.props.tpl?O.props.children:O,n,d,v,t,g,y)):j}finally{k&&k(t),C&&C(t)}}}O=null!=O&&O.type===e.Fragment&&null==O.key&&null==O.props.tpl?O.props.children:O;try{var te=N(O,n,d,v,t,g,y);return k&&k(t),e.options.unmount&&e.options.unmount(t),t._suspended?"string"==typeof te?F+te+T:L(te)?(te.unshift(F),te.push(T),te):te.then(function(e){return F+e+T}):te}catch(r){if(!g&&y&&y.onError){var re=y.onError(r,t,function(e,t){return N(e,n,d,v,t,g,y)});if(void 0!==re)return re;var ne=e.options.__e;return ne&&ne(r,t),j}if(!g)throw r;if(!r||"function"!=typeof r.then)throw r;return r.then(function e(){try{var r=N(O,n,d,v,t,g,y);return t._suspended?F+r+T:r}catch(t){if(!t||"function"!=typeof t.then)throw t;return t.then(e)}})}}var oe,ie="<"+z,ae=j;for(var se in I){var ce=I[se];if("function"!=typeof(ce=M(ce)?ce.value:ce)||"class"===se||"className"===se){switch(se){case"children":oe=ce;continue;case"key":case"ref":case"__self":case"__source":continue;case"htmlFor":if("for"in I)continue;se="for";break;case"className":if("class"in I)continue;se="class";break;case"defaultChecked":se="checked";break;case"defaultSelected":se="selected";break;case"defaultValue":case"value":switch(se="value",z){case"textarea":oe=ce;continue;case"select":v=ce;continue;case"option":v!=ce||"selected"in I||(ie+=" selected")}break;case"dangerouslySetInnerHTML":ae=ce&&ce.__html;continue;case"style":"object"==typeof ce&&(ce=_(ce));break;case"acceptCharset":se="accept-charset";break;case"httpEquiv":se="http-equiv";break;default:if(a.test(se))se=se.replace(a,"$1:$2").toLowerCase();else{if(i.test(se))continue;"-"!==se[4]&&!l.has(se)||null==ce?d?c.test(se)&&(se="panose1"===se?"panose-1":se.replace(/([A-Z])/g,"-$1").toLowerCase()):s.test(se)&&(se=se.toLowerCase()):ce+=j}}null!=ce&&!1!==ce&&(ie=!0===ce||ce===j?ie+" "+se:ie+" "+se+'="'+("string"==typeof ce?h(ce):ce+j)+'"')}}if(i.test(z))throw new Error(z+" is not a valid HTML tag name in "+ie+">");if(ae||("string"==typeof oe?ae=h(oe):null!=oe&&!1!==oe&&!0!==oe&&(ae=N(oe,n,"svg"===z||"foreignObject"!==z&&d,v,t,g,y))),k&&k(t),C&&C(t),!ae&&$.has(z))return ie+"/>";var le="</"+z+">",ue=ie+">";return L(ae)?[ue].concat(ae,[le]):"string"!=typeof ae?[ue,ae,le]:ue+ae+le}var $=new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]);function M(e){return null!==e&&"object"==typeof e&&"function"==typeof e.peek&&"value"in e}function U(e,t){return'<preact-island hidden data-target="'+e+'">'+t+"</preact-island>"}var Z=function e(t){try{var r=function(){if(t.suspended.length>0){var r=[].concat(t.suspended);return Promise.resolve(Promise.all(t.suspended.map(function(e){return e.promise}))).then(function(){return t.suspended=t.suspended.filter(function(e){return!r.includes(e)}),Promise.resolve(e(t)).then(function(){})})}}();return Promise.resolve(r&&r.then?r.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},q=function(e,t){var r=t.context,n=t.onWrite,o=t.abortSignal;try{r=r||{};var i={start:Date.now(),abortSignal:o,onWrite:n,onError:H,suspended:[]},a=W(e,r,i);n(a);var s=i.suspended.length,c=function(){if(s>0)return n("<div hidden>"),n('<script>(function(){class e extends HTMLElement{connectedCallback(){var e=this;if(!e.isConnected)return;let t=this.getAttribute("data-target");if(t){for(var r,a,i=document.createNodeIterator(document,128);i.nextNode();){let e=i.referenceNode;if(e.data=="preact-island:"+t?r=e:e.data=="/preact-island:"+t&&(a=e),r&&a)break}r&&a&&requestAnimationFrame((()=>{for(var t=a.previousSibling;t!=r&&t&&t!=r;)a.parentNode.removeChild(t),t=a.previousSibling;for(i=r;e.firstChild;)r=e.firstChild,e.removeChild(r),i.after(r),i=r;e.parentNode.removeChild(e)}))}}}customElements.define("preact-island",e);}())<\/script>'),Promise.resolve(Z(i)).then(function(){n("</div>")})}();return Promise.resolve(c&&c.then?c.then(function(){}):void 0)}catch(e){return Promise.reject(e)}};function H(e,t,n){var o=this;if(e&&e.then){for(;t=t.__;){var i=t[r];if(i&&i.__c)break}if(t){var a=t.__v,s=this.suspended.find(function(e){return e.id===a}),c=new S,l=this.abortSignal;l&&(l.aborted?c.resolve():l.addEventListener("abort",c.resolve));var u=e.then(function(){if(!l||!l.aborted){var e=n(t.props.children,t);e&&o.onWrite(U(a,e))}},this.onError);this.suspended.push({id:a,vnode:t,promise:Promise.race([u,c.promise])});var p=n(t.props.fallback);return s?"":"\x3c!--preact-island:"+a+"--\x3e"+p+"\x3c!--/preact-island:"+a+"--\x3e"}}}exports.renderToReadableStream=function(e,t){var r=new S,n=new TextEncoder("utf-8"),o=new ReadableStream({start:function(o){q(e,{context:t,onError:function(e){r.reject(e),o.abort(e)},onWrite:function(e){o.enqueue(n.encode(e))}}).then(function(){o.close(),r.resolve()}).catch(function(e){o.error(e),r.reject(e)})}});return o.allReady=r.promise,o};
//# sourceMappingURL=index.js.map
