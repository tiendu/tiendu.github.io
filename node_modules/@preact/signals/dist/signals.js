var i,n,r,t=require("preact"),e=require("preact/hooks"),f=require("@preact/signals-core"),o=[],u=[];f.effect(function(){i=this.N})();function a(i,n){t.options[i]=n.bind(null,t.options[i]||function(){})}function c(i){if(r)r();r=i&&i.S()}function s(i){var n=this,r=i.data,o=useSignal(r);o.value=r;var u=e.useMemo(function(){var i=n,r=n.__v;while(r=r.__)if(r.__c){r.__c.__$f|=4;break}var e=f.computed(function(){var i=o.value.value;return 0===i?0:!0===i?"":i||""}),u=f.computed(function(){return!t.isValidElement(e.value)}),a=f.effect(function(){this.N=b;if(u.value){var n=e.value;if(i.base&&3===i.base.nodeType)i.base.data=n}}),c=n.__$u.d;n.__$u.d=function(){a();c.call(this)};return[u,e]},[]),a=u[0],c=u[1];return a.value?c.peek():c.value}s.displayName="_st";Object.defineProperties(f.Signal.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:s},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});a("__b",function(i,n){if("string"==typeof n.type){var r,t=n.props;for(var e in t)if("children"!==e){var o=t[e];if(o instanceof f.Signal){if(!r)n.__np=r={};r[e]=o;t[e]=o.peek()}}}i(n)});a("__r",function(i,r){c();var t,e=r.__c;if(e){e.__$f&=-2;if(void 0===(t=e.__$u))e.__$u=t=function(i){var n;f.effect(function(){n=this});n.c=function(){e.__$f|=1;e.setState({})};return n}()}n=e;c(t);i(r)});a("__e",function(i,r,t,e){c();n=void 0;i(r,t,e)});a("diffed",function(i,r){c();n=void 0;var t;if("string"==typeof r.type&&(t=r.__e)){var e=r.__np,f=r.props;if(e){var o=t.U;if(o)for(var u in o){var a=o[u];if(void 0!==a&&!(u in e)){a.d();o[u]=void 0}}else{o={};t.U=o}for(var s in e){var h=o[s],p=e[s];if(void 0===h){h=v(t,s,p,f);o[s]=h}else h.o(p,f)}}}i(r)});function v(i,n,r,t){var e=n in i&&void 0===i.ownerSVGElement,o=f.signal(r);return{o:function(i,n){o.value=i;t=n},d:f.effect(function(){this.N=b;var r=o.value.value;if(t[n]!==r){t[n]=r;if(e)i[n]=r;else if(r)i.setAttribute(n,r);else i.removeAttribute(n)}})}}a("unmount",function(i,n){if("string"==typeof n.type){var r=n.__e;if(r){var t=r.U;if(t){r.U=void 0;for(var e in t){var f=t[e];if(f)f.d()}}}}else{var o=n.__c;if(o){var u=o.__$u;if(u){o.__$u=void 0;u.d()}}}i(n)});a("__h",function(i,n,r,t){if(t<3||9===t)n.__$f|=2;i(n,r,t)});t.Component.prototype.shouldComponentUpdate=function(i,n){var r=this.__$u,t=r&&void 0!==r.s;for(var e in n)return!0;if(this.__f||"boolean"==typeof this.u&&!0===this.u){var f=2&this.__$f;if(!(t||f||4&this.__$f))return!0;if(1&this.__$f)return!0}else{if(!(t||4&this.__$f))return!0;if(3&this.__$f)return!0}for(var o in i)if("__source"!==o&&i[o]!==this.props[o])return!0;for(var u in this.props)if(!(u in i))return!0;return!1};function useSignal(i){return e.useMemo(function(){return f.signal(i)},[])}var h="undefined"==typeof requestAnimationFrame?setTimeout:requestAnimationFrame,p=function(i){queueMicrotask(function(){queueMicrotask(i)})};function l(){f.batch(function(){var n;while(n=o.shift())i.call(n)})}function d(){if(1===o.push(this))(t.options.requestAnimationFrame||h)(l)}function _(){f.batch(function(){var n;while(n=u.shift())i.call(n)})}function b(){if(1===u.push(this))(t.options.requestAnimationFrame||p)(_)}exports.Signal=f.Signal;exports.batch=f.batch;exports.computed=f.computed;exports.effect=f.effect;exports.signal=f.signal;exports.untracked=f.untracked;exports.useComputed=function(i){var r=e.useRef(i);r.current=i;n.__$f|=4;return e.useMemo(function(){return f.computed(function(){return r.current()})},[])};exports.useSignal=useSignal;exports.useSignalEffect=function(i){var n=e.useRef(i);n.current=i;e.useEffect(function(){return f.effect(function(){this.N=d;return n.current()})},[])};//# sourceMappingURL=signals.js.map
